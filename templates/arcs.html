<!-- <!DOCTYPE html>
<meta charset="utf-8">
<head>
  <title>Arc generator (centroid)</title>
</head>

<style>
text {
  font-family: "Helvetica Neue", Helvetica, sans-serif;
  font-size: 12px;
  font-weight: bold;
  fill: white;
  text-anchor: middle;
}
path {
	fill: orange;
	stroke: white;
}
</style>

<body>
  <svg width="700" height="220">
  	<g transform="translate(300, 110)"></g>
  </svg>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js"></script>
  <script>
// Create an arc generator with configuration
var arcGenerator = d3.arc()
	.innerRadius(20)
    .outerRadius(100)
    // .startAngle(-110*(Math.PI/180)+Math.PI/2)
    // .endAngle(-250*(Math.PI/180)+Math.PI/2);

var arcData = [
	//{label: 'A', startAngle: 0, endAngle: 0.2}
	{label: 'B', startAngle: 0.2, endAngle: 0.6}
	// {label: 'C', startAngle: 0.6, endAngle: 1.4},
	// {label: 'D', startAngle: 1.4, endAngle: 3},
	// {label: 'E', startAngle: 3, endAngle: 2* Math.PI}
];

var arcData2 = [
	//{label: 'A', startAngle: 0, endAngle: 0.2}
	//{label: 'B', startAngle: 0.2, endAngle: 0.6}
	{label: 'C', startAngle: 0.6, endAngle: 1.4}
	// {label: 'D', startAngle: 1.4, endAngle: 3},
	// {label: 'E', startAngle: 3, endAngle: 2* Math.PI}
];

// Create a path element and set its d attribute
d3.select('g')
	.selectAll('path')
	.data(arcData)
	.enter()
    .append('path')
    .attr("transform", function(d){ return( "translate(" + 0 + "," + 0 + ")rotate(-110)")})
    .attr('d', arcGenerator);
    
// d3.append("g").select('g')
// 	.selectAll('path')
// 	.data(arcData2)
// 	.enter()
// 	.append('path')
// 	.attr('d', arcGenerator);

// Add labels, using .centroid() to position
// d3.select('g')
// 	.selectAll('text')
// 	.data(arcData)
// 	.enter()
// 	.append('text')
// 	.each(function(d) {
// 		var centroid = arcGenerator.centroid(d);
// 		d3.select(this)
// 			.attr('x', centroid[0])
// 			.attr('y', centroid[1])
// 			.attr('dy', '0.33em')
// 			.text(d.label);
// 	});
  </script>
</body>
</html> -->

<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="description" content="Basic beginner's source code to drawing arcs in D3 using dynamically-generated data.">

    <title>JavaScript D3: Drawing Concentric Arcs (Part I)</title>

    <style type='text/css'>
      .click-circle{
        cursor: pointer;
      }
    </style>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.2.2/d3.v3.min.js"></script>

  </head>

  <body>
    <div class="chart"></div>
    <script type="text/javascript">

var width = window.innerWidth,
    height = window.innerHeight;

  // append svg to the DIV
d3.select(".chart").append("svg:svg")
  .attr("width", width)
  .attr("height", height);

var render = function(dataset) {
  vis = d3.select("svg");   // select the svg

    // set constants
  var PI = Math.PI;
  var arcMin = 75;        // inner radius of the first arc
  var arcWidth = 15;      // width
  var arcPad = 1;         // padding between arcs

    // arc accessor
    //  d and i are automatically passed to accessor functions,
    //  with d being the data and i the index of the data
  var drawArc = d3.svg.arc()
      .innerRadius(function(d, i) {
        return  arcMin + i*(arcWidth) + arcPad;
      })
      .outerRadius(function(d, i) {
        return arcMin + (i+1)*(arcWidth);
      })
      .startAngle(0 * (PI/180))
      .endAngle(function(d, i) {
        return d*5 * (PI/180);
      });

    // bind the data
  var arcs = vis.selectAll("path.arc-path").data(dataset);

    // *** update existing arcs -- redraw them ***
  arcs.attr("d", drawArc)
      .attr("fill", function(d){
          // we need to redefine the fills as well since we have new data,
          //  otherwise the colors would no longer be relative to the data
          //  values (and arc length). if your fills weren't relative to
          //  the data, this would not be necessary
        var grn = Math.floor((1 - d/60)*255);
        return "rgb(0, "+ grn +", 0)";
      });

    // draw arcs for new data
  arcs.enter().append("svg:path")
      .attr("class", "arc-path")                  // assigns a class for easier selecting
      .attr("transform", "translate(400,200)")    // sets position--easier than setting x's and y's
      .attr("fill", function(d){
          // fill is an rgb value with the green value determined by the data
          // smaller numbers result in a higher green value (1 - d/60)
          // you should also look into using d3 scales to create gradients
        var grn = Math.floor((1 - d/60)*255);
        return "rgb(0, "+ grn +", 0)";
      })
      .attr("d", drawArc);      // draw the arc
};


// you can safely ignore the code below.
//  the code is used to create a click area for people to regenerate
//  arcs by generating a new data set and calling render on that set

  // for generating a random array of times
var generateTimes = function(quantity) {
  var i, times = [];

  for(i=0; i<quantity; i++) {
    times.push(Math.round(Math.random()*60));
  }

  return times;
};

  // drawing the click area
var initialize = function() {
  var arcMin = 75;    // this should match the arcMin in render()
  var times = generateTimes(10);

  render(times);

    // making the click circle
  if(!d3.selectAll("circle.click-circle")[0].length) {    // if there is no click area..
    d3.select("svg").append("circle")
        .attr("class", 'click-circle')
        .attr("transform", "translate(400,200)")
        .attr("r", arcMin*0.85)
        .attr("fill", "rgba(201, 201, 201, 0.5)")
        .on("click", function(d) {
          times = generateTimes(10);
          render(times);
        });
  }
}

initialize();

    </script>
  </body>
</html>
